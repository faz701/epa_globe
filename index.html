<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<title>2025 ‚Äî –æ–¥–Ω–∏–º —Å–ª–æ–≤–æ–º | 3D Globe</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@500;600&display=swap" rel="stylesheet">

<style>
  body {
    margin: 0;
    background: radial-gradient(circle at center, #020617, #000);
    overflow: hidden;
    font-family: 'Inter', sans-serif;
  }

  #title {
    position: absolute;
    top: 24px;
    width: 100%;
    text-align: center;
    color: #e5e7eb;
    font-size: 28px;
    font-weight: 600;
    z-index: 10;
    letter-spacing: .5px;
  }

  #hint {
    position: absolute;
    bottom: 16px;
    width: 100%;
    text-align: center;
    color: #64748b;
    font-size: 12px;
    z-index: 10;
  }
</style>
</head>
<body>

<div id="title">2025 –≥–æ–¥ –≤ –Ω–∞—à–µ–π –∫–æ–º–ø–∞–Ω–∏–∏ ‚Äî –æ–¥–Ω–∏–º —Å–ª–æ–≤–æ–º</div>
<div id="hint">3D –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è ‚Ä¢ —Ä–µ–∂–∏–º –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏</div>

<!-- ‚úÖ –°–¢–ê–ë–ò–õ–¨–ù–´–ï CDN (–í–ê–ñ–ù–û) -->
<script src="https://cdn.jsdelivr.net/npm/three@0.158.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three-globe@2.27.3/dist/three-globe.min.js"></script>

<script>
// ======================
// –ù–ê–°–¢–†–û–ô–ö–ò
// ======================
const DATA_URL = "https://script.google.com/macros/s/AKfycbxX4AUMoWBdo7IMgwKvKpVDgQC3ruNHlit4P3IJBcQytzBlflVxBOM6RUp7PqBt6-KuXg/exec";
const PRESENTATION_MODE = true;   // true = –¢–í / –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è
const WORD_COLOR = "#facc15";

// ======================
// FALLBACK (–µ—Å–ª–∏ API –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω)
// ======================
const fallbackData = [
  { text: "–†–æ—Å—Ç", value: 5 },
  { text: "–ö–æ–º–∞–Ω–¥–∞", value: 3 },
  { text: "–†–∞–∑–≤–∏—Ç–∏–µ", value: 4 }
];

// ======================
// –ó–ê–ì–†–£–ó–ö–ê –î–ê–ù–ù–´–•
// ======================
fetch(DATA_URL)
  .then(r => r.json())
  .then(initGlobe)
  .catch(() => initGlobe(fallbackData));

// ======================
// –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ì–õ–û–ë–£–°–ê
// ======================
function initGlobe(words) {

  const globe = new ThreeGlobe()
    // üåç –î–µ–Ω—å / –ù–æ—á—å (NASA-—Å—Ç–∏–ª—å)
    .globeImageUrl("https://unpkg.com/three-globe/example/img/earth-blue-marble.jpg")
    .globeNightImageUrl("https://unpkg.com/three-globe/example/img/earth-night.jpg")
    .bumpImageUrl("https://unpkg.com/three-globe/example/img/earth-topology.png")

    // üå´ –ê—Ç–º–æ—Å—Ñ–µ—Ä–∞
    .showAtmosphere(true)
    .atmosphereColor("#60a5fa")
    .atmosphereAltitude(0.25)

    // üî§ –°–ª–æ–≤–∞ –Ω–∞ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏
    .labelsData(words)
    .labelLat(() => Math.random() * 180 - 90)
    .labelLng(() => Math.random() * 360 - 180)
    .labelText(d => d.text)
    .labelSize(d => 1.1 + d.value * 0.25)
    .labelColor(() => WORD_COLOR)
    .labelDotRadius(0.35)
    .labelAltitude(0.018);

  // ======================
  // SCENE
  // ======================
  const scene = new THREE.Scene();
  scene.add(globe);

  // üé• –ö–∞–º–µ—Ä–∞
  const camera = new THREE.PerspectiveCamera(
    55,
    window.innerWidth / window.innerHeight,
    0.1,
    2000
  );
  camera.position.z = 520;

  // üñ• Renderer
  const renderer = new THREE.WebGLRenderer({ antialias: true });
  renderer.setSize(window.innerWidth, window.innerHeight);
  renderer.setPixelRatio(window.devicePixelRatio);
  document.body.appendChild(renderer.domElement);

  // üí° –°–≤–µ—Ç (—Ä–µ–∞–ª–∏–∑–º)
  scene.add(new THREE.AmbientLight(0xffffff, 0.6));

  const sunLight = new THREE.DirectionalLight(0xffffff, 1.2);
  sunLight.position.set(300, 200, 300);
  scene.add(sunLight);

  // ======================
  // –ê–ù–ò–ú–ê–¶–ò–Ø
  // ======================
  let zoom = 520;
  let angle = 0;

  (function animate() {
    requestAnimationFrame(animate);

    // –≤—Ä–∞—â–µ–Ω–∏–µ –ó–µ–º–ª–∏
    globe.rotation.y += 0.0016;

    // –ø–ª–∞–≤–Ω—ã–π –∑—É–º
    if (zoom > 360) zoom -= 0.05;
    camera.position.z = zoom;

    // üé• —Ä–µ–∂–∏–º –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏
    if (PRESENTATION_MODE) {
      angle += 0.0008;
      camera.position.x = Math.sin(angle) * 120;
      camera.position.y = Math.sin(angle * 0.7) * 60;
      camera.lookAt(scene.position);
    }

    renderer.render(scene, camera);
  })();

  // ======================
  // RESIZE
  // ======================
  window.addEventListener("resize", () => {
    camera.aspect = window.innerWidth / window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
  });
}
</script>

</body>
</html>

